#!/usr/bin/env nu
const homebrew_nu = {{ joinPath .chezmoi.sourceDir "dot_config/nushell/homebrew.nu" | quote }}
source $homebrew_nu

if (which brew | is-empty) {
  NONINTERACTIVE=1 /usr/bin/env bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
  source $homebrew_nu
}

if (which brew | is-not-empty) {
  # Brewfile hash: {{ include "dot_config/homebrew/Brewfile" | sha256sum }}
  brew bundle --file {{ joinPath .chezmoi.sourceDir "dot_config/homebrew/Brewfile" | quote }}
}
