dirs=(
  "$HOME/.local/bin"
)
for dir in "${dirs[@]}"; do
  case ":$PATH:" in
    *":$dir:"*) ;;
    *) PATH="$dir:$PATH" ;;
  esac
done

alias ni="exec mise exec -- nu -i"

RESOLVING_ENVIRONMENT=0
# https://intellij-support.jetbrains.com/hc/en-us/articles/15268184143890-Shell-Environment-Loading
if [[ -n "$INTELLIJ_ENVIRONMENT_READER" ]]; then RESOLVING_ENVIRONMENT=1; fi
# https://code.visualstudio.com/docs/editor/command-line#_how-do-i-detect-when-a-shell-was-launched-by-vs-code
if [[ -n "$VSCODE_RESOLVING_ENVIRONMENT" ]]; then RESOLVING_ENVIRONMENT=1; fi

# If launched by IDEs, read the environment variables from nushell
if [[ "$RESOLVING_ENVIRONMENT" == "1" ]]; then
  if mise which nu &> /dev/null; then
    export RESOLVING_ENVIRONMENT
    eval $(mise exec -- nu)
    unset RESOLVING_ENVIRONMENT
  fi
fi
